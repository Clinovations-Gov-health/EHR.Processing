<main>
    <div *ngIf="fhirService.authenticated | async">
        <table mat-table class="data-table" [dataSource]="fhirService.encountersObservable | async">
            <ng-container matColumnDef="Procedure Name">
                <th mat-header-cell *matHeaderCellDef class="column-names"> PROCEDURE NAME </th>
                <td mat-cell *matCellDef="let encounter">{{encounter.class.display || "Unknown"}}</td>
            </ng-container>
            <ng-container matColumnDef="Start Date">
                <th mat-header-cell *matHeaderCellDef class="column-names"> START DATE </th>
                <td mat-cell *matCellDef="let encounter">{{moment(encounter.period.start).format("YYYY-MM-DD")}}</td>
            </ng-container>
            <ng-container matColumnDef="End Date">
                <th mat-header-cell *matHeaderCellDef class="column-names"> END DATE </th>
                <td mat-cell *matCellDef="let encounter">{{moment(encounter.period.end).format("YYYY-MM-DD")}}</td>
            </ng-container>

            <tr mat-header-row
                *matHeaderRowDef="['Procedure Name', 'Start Date', 'End Date']">
            </tr>
            <tr mat-row
                *matRowDef="let row; columns: ['Procedure Name', 'Start Date', 'End Date']">
            </tr>
        </table>
    </div>

    <div class="data-provider-wrapper">
        <button mat-flat-button class="buttons" [disabled]="working" (click)="connectWithFhir('Cerner')">Update With
            Cerner</button>
        <button mat-flat-button class="buttons" [disabled]="working" color="accent"
            (click)="connectWithFhir('AllScripts')">Update With AllScripts</button>
        <button mat-flat-button class="buttons" [disabled]="working" color="accent" (click)="connectWithFhir('Epic')">Update
            With Epic</button>
    </div>
</main>
